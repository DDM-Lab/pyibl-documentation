<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Multi-agent network example &#8212; PyIBL 5.2.1dev1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=a66d8bb5" />
    <script src="_static/documentation_options.js?v=b4878324"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Box game example" href="box-game.html" />
    <link rel="prev" title="Rock paper scissors game example" href="rock-paper-scissors.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/pyibl.png" alt="Logo" />
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Internals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="binary-choice.html">Binary choice example</a></li>
<li class="toctree-l2"><a class="reference internal" href="rock-paper-scissors.html">Rock paper scissors game example</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Multi-agent network example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#games">Games</a></li>
<li class="toctree-l3"><a class="reference internal" href="#networks">Networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#games-and-networks-definitions">Games and networks definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-model">The model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#results">Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="box-game.html">Box game example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Changes</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="examples.html">Examples</a><ul>
      <li>Previous: <a href="rock-paper-scissors.html" title="previous chapter">Rock paper scissors game example</a></li>
      <li>Next: <a href="box-game.html" title="next chapter">Box game example</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="multi-agent-network-example">
<h1>Multi-agent network example<a class="headerlink" href="#multi-agent-network-example" title="Link to this heading">¶</a></h1>
<p>In this example we describe an experiment to be modeled involving multiple agents interacting in constantly varying ways.
It is a coöperative binary choice game played by multiple players whose connectivity to one another varies,
in an effort to understand how their networks of interconnectedness facilitate or hinder their abilities to succeed at the game.
This closely follows some work described in Gonzalez <em>et al</em> (2025) <a class="footnote-reference brackets" href="#f1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<section id="games">
<h2>Games<a class="headerlink" href="#games" title="Link to this heading">¶</a></h2>
<p>The binary choice games are two from a spectrum of games described in Balliet <em>et al.</em> (2016) <a class="footnote-reference brackets" href="#f2" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>. The games in this spectrum are played between two players conventionally
referred to as Mary and John, exploring a taxonomy of dimensions of social interaction. For this example we use just two of the games at the extremes of one of the dimensions,
fully independent and fully interdependent.
In both games the players will each earn five points if they both “coöperate” by each picking A, and will each earn nothing if they
both “defect” by by each picking B. The difference is in the outcome if one picks A and the other B. In the independence game</p>
<img alt="_images/independence.png" class="align-center" src="_images/independence.png" />
<p>each player receives the five point reward whenever they pick A, regardless of the other player’s choice.
In the interdependence game</p>
<img alt="_images/interdependence.png" class="align-center" src="_images/interdependence.png" />
<p>each player receives the five point reward whenever the <em>other</em> play picks A, regadless of this player’s choice:</p>
<p>For this example each player makes their choices with no knowledge of the reward matrices, nor any knowledge of the other player’s choices. All they know
if what they themselves choose, and what rewards they receive.</p>
<p>In a normally played single independence game of many rounds we might expect both players to quickly settle on choosing A since that always rewards them.
Naïvely we might similarly expect that in a similar version of the interdependence game for each player to essentially play randomly, since over the course
of a single choice which choice they made has no effect on their reward. However there is a deep subtlety to this game where without any explicit transfer
of information between the players, over the course of several moves they will be driven to both pick A. This is driven by a natural weighting of
recent results over earlier ones, resulting in a roughly win-stay/lose-shift strategy, which curiously over a two move sequence can drive the players
to coöperate.</p>
</section>
<section id="networks">
<h2>Networks<a class="headerlink" href="#networks" title="Link to this heading">¶</a></h2>
<p>For this example we are interested not in normal play between just two players, but rather small networks of players interacting with different players, and how this
may modify the choices made. The networks chosen for this example are inspired by those used for a somewhat different task in Mason <em>et al.</em> (2008) <a class="footnote-reference brackets" href="#f3" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> and Sloman <em>et al.</em> (2021) <a class="footnote-reference brackets" href="#f4" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>.
For this example we use three different networks, each with six nodes.</p>
<img alt="_images/networks.png" class="align-center" src="_images/networks.png" />
<p>When we play the game at each round we will randomly select three, non-overlapping  pairs of nodes, such that each node in a pair is connected in the network to the other
node of that pair.
Note that in the disconnected network each node is always paired with the same other node; in the ring network there are only two possible ways pairs of nodes can be connected; and
in the fully connected case there are fifteen different ways the pairs of nodes can be selected. Where there are multiple ways to select pairs of nodes, at each round we randomly
select a different way of pairing them, so, except in the disconnected case, at each round a node may play a different partner than it did in the previous or succeeding round.</p>
</section>
<section id="games-and-networks-definitions">
<h2>Games and networks definitions<a class="headerlink" href="#games-and-networks-definitions" title="Link to this heading">¶</a></h2>
<p>The Python code for defining the two games to be played is a dict mapping the names of the two games to further dicts mapping a tuple of the possible choices
by the two players to a tuple of the outcomes for those two players.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">GAMES</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;independence&quot;</span><span class="p">:</span> <span class="p">{(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                          <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                          <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                          <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)},</span>
         <span class="s2">&quot;interdependence&quot;</span><span class="p">:</span> <span class="p">{(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                             <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                             <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                             <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)}}</span>
</pre></div>
</div>
<p>The code for defining the three networks to be used is a dict mapping the names of the three networks to lists of sublists, each sublist containing three 2-tuples.
These sublists enumerate each of the possible ways the various nodes can be connected.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">PAIRINGS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;disconnected&quot;</span><span class="p">:</span> <span class="p">[[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]],</span>
    <span class="s2">&quot;ring&quot;</span><span class="p">:</span> <span class="p">[[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)],</span>
             <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]],</span>
    <span class="s2">&quot;fully-connected&quot;</span><span class="p">:</span> <span class="p">[[(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]]}</span>
</pre></div>
</div>
<p>From this dict we further compute constants describing the number of pairs to be played at each round, and the number of total nodes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">PAIRS</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">PAIRINGS</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="k">for</span> <span class="n">kind</span> <span class="ow">in</span> <span class="n">PAIRINGS</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">pairing</span> <span class="ow">in</span> <span class="n">kind</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">pairing</span><span class="p">)</span> <span class="o">==</span> <span class="n">PAIRS</span>
<span class="n">NODES</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">PAIRS</span>
</pre></div>
</div>
<p>For these networks the constant <code class="docutils literal notranslate"><span class="pre">PAIRS</span></code> is always <code class="docutils literal notranslate"><span class="pre">3</span></code> and the constant <code class="docutils literal notranslate"><span class="pre">NODES</span></code> is always <code class="docutils literal notranslate"><span class="pre">6</span></code>.</p>
</section>
<section id="the-model">
<h2>The model<a class="headerlink" href="#the-model" title="Link to this heading">¶</a></h2>
<p>For the model we create a PyIBL <code class="docutils literal notranslate"><span class="pre">Agent</span></code> for each of the nodes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">PREPOPULATED_VALUE</span> <span class="o">=</span> <span class="mi">6</span>
<span class="o">...</span>
<span class="n">agents</span> <span class="o">=</span> <span class="p">[</span><span class="n">Agent</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">default_utility</span><span class="o">=</span><span class="n">PREPOPULATED_VALUE</span><span class="p">)</span>
          <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">NODES</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
</pre></div>
</div>
<p>Note that the prepopulated value is chosen as 1.2 times the maximum possible payoff of 5 to facilitate early exploration.</p>
<p>To run the model we define a function <code class="docutils literal notranslate"><span class="pre">run_one()</span></code> which takes as parameters
#. the list of agents defined above
#. the name of the network to use
#. the name of the game to play
#. the number of sets of participants to simulate playing the game
#. the number of rounds to place for each simulated set of participants
#. a <code class="docutils literal notranslate"><span class="pre">tqdm</span></code> progress indicator to update after the simulation of each set of participants is completed
#. a <code class="docutils literal notranslate"><span class="pre">CSVWriter</span></code> object into which to write details of each round
#. and the name of a file into which to draw a plot of the results, or <code class="docutils literal notranslate"><span class="pre">None</span></code> simply show them on terminal as <code class="docutils literal notranslate"><span class="pre">run_one()</span></code> finishes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">run_one</span><span class="p">(</span><span class="n">agents</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="n">game</span><span class="p">,</span> <span class="n">participant_sets</span><span class="p">,</span> <span class="n">rounds</span><span class="p">,</span> <span class="n">progress</span><span class="p">,</span> <span class="n">csv_writer</span><span class="p">,</span> <span class="n">plot_file</span><span class="p">):</span>
    <span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">Counter</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">pp</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">participant_sets</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">:</span>
            <span class="n">a</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">PAIRINGS</span><span class="p">[</span><span class="n">network</span><span class="p">]):</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">))</span> <span class="c1"># counterbalance</span>
                <span class="n">choices</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">agents</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">choose</span><span class="p">(</span><span class="s2">&quot;AB&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">)</span>
                <span class="n">counts</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">((</span><span class="n">choices</span><span class="p">,))</span>
                <span class="n">payoffs</span> <span class="o">=</span> <span class="n">GAMES</span><span class="p">[</span><span class="n">game</span><span class="p">][</span><span class="n">choices</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">count</span><span class="p">()):</span>
                    <span class="n">agents</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">payoffs</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
                <span class="n">csv_writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">((</span><span class="n">network</span><span class="p">,</span> <span class="n">game</span><span class="p">,</span> <span class="n">pp</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                                     <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">payoffs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                     <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">choices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">payoffs</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</pre></div>
</div>
<p>We create <code class="docutils literal notranslate"><span class="pre">Counter</span></code> object to capture the number of times each possible pair of choices is made at each round.
We then iterate through the required number of sets of participants, first resetting all the agents.
The for each round we randomly pick one of the pairings of participants as described by the netword; for the disconnected network
this is always a fixed set of pairings, for the ring one of two possibiliites, and for the fully connected network
one of fifteen.
We iterate through the three pairs in the chosen pairings and play one game, having each of the two agents selected make a choice,
computing their payoffs, and responding to the agents with those payoffs, and finally record what we have done to the <code class="docutils literal notranslate"><span class="pre">CSVWriter</span></code>.
After all the rounds are finished we update the progress indicator.</p>
<p>At this point all the data for this network and game combination is generated and gathered, and we can plot the results</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span>
         <span class="nb">tuple</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="n">r</span><span class="p">][(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">)]</span> <span class="o">/</span> <span class="p">(</span><span class="n">participant_sets</span> <span class="o">*</span> <span class="n">PAIRS</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">)),</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;(&quot;A&quot;, &quot;A&quot;)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;solid&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span>
         <span class="nb">tuple</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="n">r</span><span class="p">][(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">)]</span> <span class="o">/</span> <span class="p">(</span><span class="n">participant_sets</span> <span class="o">*</span> <span class="n">PAIRS</span><span class="p">)</span>  <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">)),</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;(&quot;A&quot;, &quot;B&quot;)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dotted&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span>
         <span class="nb">tuple</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="n">r</span><span class="p">][(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">)]</span> <span class="o">/</span> <span class="p">(</span><span class="n">participant_sets</span> <span class="o">*</span> <span class="n">PAIRS</span><span class="p">)</span>  <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">)),</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;(&quot;B&quot;, &quot;A&quot;)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;violet&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dotted&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span>
         <span class="nb">tuple</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="n">r</span><span class="p">][(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">)]</span> <span class="o">/</span> <span class="p">(</span><span class="n">participant_sets</span> <span class="o">*</span> <span class="n">PAIRS</span><span class="p">)</span>  <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">)),</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;(&quot;B&quot;, &quot;B&quot;)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">game</span><span class="si">}</span><span class="s2"> game, </span><span class="si">{</span><span class="n">network</span><span class="si">}</span><span class="s2"> topology</span><span class="se">\n</span><span class="s2">&quot;</span>
          <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">participant_sets</span><span class="si">}</span><span class="s2"> participant sets, noise=</span><span class="si">{</span><span class="n">agents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">noise</span><span class="si">}</span><span class="s2">, decay=</span><span class="si">{</span><span class="n">agents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">decay</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">rounds</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">((</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;fraction of pairs choosing&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">plot_file</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">plot_file</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that we plot one line for each of the four possible pairs of choices, showing the fraction of times that choice was made.</p>
<p>All that is left to do is iterate through the two games and three networks and call the <code class="docutils literal notranslate"><span class="pre">run_one()</span></code> function.
This main function uses <code class="docutils literal notranslate"><span class="pre">click</span></code> to parse a few command line arguments allowing the number of sets of participants,
number of rounds played by each, and noise and decay parameters of the agents to be set, though with sensible defaults
if none are explicitly specified.
This function also opens and closes the file into which the CSV data will be written, as well as creating the progress indicator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;--rounds&quot;</span><span class="p">,</span> <span class="s2">&quot;-r&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_ROUNDS</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
              <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The number of rounds to play&quot;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;--participant-sets&quot;</span><span class="p">,</span> <span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_PARTICIPANT_SETS</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
              <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The number of participant sets to simulate&quot;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;-noise&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_NOISE</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
              <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The IBL activation noise to use&quot;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;--decay&quot;</span><span class="p">,</span> <span class="s2">&quot;-d&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_DECAY</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
              <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The IBL decay parameter to use&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">rounds</span><span class="p">,</span> <span class="n">participant_sets</span><span class="p">,</span> <span class="n">noise</span><span class="p">,</span> <span class="n">decay</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;results.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">writerow</span><span class="p">((</span><span class="s2">&quot;network,game,participant set,round,&quot;</span>
                    <span class="s2">&quot;player one,player one move,player one payoff,&quot;</span>
                    <span class="s2">&quot;player two,player two move,player two payoff&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>
        <span class="n">agents</span> <span class="o">=</span> <span class="p">[</span><span class="n">Agent</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">default_utility</span><span class="o">=</span><span class="n">PREPOPULATED_VALUE</span><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="n">noise</span><span class="p">,</span> <span class="n">decay</span><span class="o">=</span><span class="n">decay</span><span class="p">)</span>
                  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">NODES</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="k">with</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">GAMES</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">PAIRINGS</span><span class="p">)</span> <span class="o">*</span> <span class="n">participant_sets</span> <span class="o">*</span> <span class="n">rounds</span><span class="p">))</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">PAIRINGS</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">GAMES</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">run_one</span><span class="p">(</span><span class="n">agents</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">participant_sets</span><span class="p">,</span> <span class="n">rounds</span><span class="p">,</span>
                            <span class="n">t</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">g</span><span class="si">}</span><span class="s2">.png&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>The entire file can
<a class="reference download internal" download="" href="_downloads/11636e3e9ad67e7e3b0e46cf86031ff1/multi-agent-network.zip"><code class="xref download docutils literal notranslate"><span class="pre">be</span> <span class="pre">downloaded</span></code></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="c1"># Copyright 2025 Carnegie Mellon University</span>
<span class="linenos">  2</span><span class="c1"># Example of networked binary choice games implemented with PyIBL</span>
<span class="linenos">  3</span>
<span class="linenos">  4</span><span class="kn">import</span> <span class="nn">click</span>
<span class="linenos">  5</span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="linenos">  6</span><span class="kn">import</span> <span class="nn">csv</span>
<span class="linenos">  7</span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="linenos">  8</span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
<span class="linenos">  9</span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="linenos"> 10</span><span class="kn">from</span> <span class="nn">pyibl</span> <span class="kn">import</span> <span class="n">Agent</span>
<span class="linenos"> 11</span><span class="kn">import</span> <span class="nn">random</span>
<span class="linenos"> 12</span><span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="linenos"> 13</span>
<span class="linenos"> 14</span><span class="n">DEFAULT_ROUNDS</span> <span class="o">=</span> <span class="mi">60</span>
<span class="linenos"> 15</span><span class="n">DEFAULT_PARTICIPANT_SETS</span> <span class="o">=</span> <span class="mi">500</span>
<span class="linenos"> 16</span>
<span class="linenos"> 17</span><span class="n">DEFAULT_NOISE</span> <span class="o">=</span> <span class="mf">0.25</span>
<span class="linenos"> 18</span><span class="n">DEFAULT_DECAY</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="linenos"> 19</span>
<span class="linenos"> 20</span><span class="n">GAMES</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;independence&quot;</span><span class="p">:</span> <span class="p">{(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
<span class="linenos"> 21</span>                          <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="linenos"> 22</span>                          <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
<span class="linenos"> 23</span>                          <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)},</span>
<span class="linenos"> 24</span>         <span class="s2">&quot;interdependence&quot;</span><span class="p">:</span> <span class="p">{(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
<span class="linenos"> 25</span>                             <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
<span class="linenos"> 26</span>                             <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="linenos"> 27</span>                             <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">):</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)}}</span>
<span class="linenos"> 28</span>
<span class="linenos"> 29</span><span class="n">PREPOPULATED_VALUE</span> <span class="o">=</span> <span class="mi">6</span>
<span class="linenos"> 30</span>
<span class="linenos"> 31</span><span class="n">PAIRINGS</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 32</span>    <span class="s2">&quot;disconnected&quot;</span><span class="p">:</span> <span class="p">[[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]],</span>
<span class="linenos"> 33</span>    <span class="s2">&quot;ring&quot;</span><span class="p">:</span> <span class="p">[[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)],</span>
<span class="linenos"> 34</span>             <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]],</span>
<span class="linenos"> 35</span>    <span class="s2">&quot;fully-connected&quot;</span><span class="p">:</span> <span class="p">[[(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span>
<span class="linenos"> 36</span>                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span>
<span class="linenos"> 37</span>                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span>
<span class="linenos"> 38</span>                        <span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span>
<span class="linenos"> 39</span>                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span>
<span class="linenos"> 40</span>                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span>
<span class="linenos"> 41</span>                        <span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span>
<span class="linenos"> 42</span>                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span>
<span class="linenos"> 43</span>                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span>
<span class="linenos"> 44</span>                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)],</span>
<span class="linenos"> 45</span>                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)],</span>
<span class="linenos"> 46</span>                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)],</span>
<span class="linenos"> 47</span>                        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)],</span>
<span class="linenos"> 48</span>                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)],</span>
<span class="linenos"> 49</span>                        <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]]}</span>
<span class="linenos"> 50</span>
<span class="linenos"> 51</span><span class="n">PAIRS</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">PAIRINGS</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="linenos"> 52</span><span class="k">for</span> <span class="n">kind</span> <span class="ow">in</span> <span class="n">PAIRINGS</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
<span class="linenos"> 53</span>    <span class="k">for</span> <span class="n">pairing</span> <span class="ow">in</span> <span class="n">kind</span><span class="p">:</span>
<span class="linenos"> 54</span>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">pairing</span><span class="p">)</span> <span class="o">==</span> <span class="n">PAIRS</span>
<span class="linenos"> 55</span><span class="n">NODES</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">PAIRS</span>
<span class="linenos"> 56</span>
<span class="linenos"> 57</span><span class="k">def</span> <span class="nf">run_one</span><span class="p">(</span><span class="n">agents</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="n">game</span><span class="p">,</span> <span class="n">participant_sets</span><span class="p">,</span> <span class="n">rounds</span><span class="p">,</span> <span class="n">progress</span><span class="p">,</span> <span class="n">csv_writer</span><span class="p">,</span> <span class="n">plot_file</span><span class="p">):</span>
<span class="linenos"> 58</span>    <span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">Counter</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">)]</span>
<span class="linenos"> 59</span>    <span class="k">for</span> <span class="n">pp</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">participant_sets</span><span class="p">):</span>
<span class="linenos"> 60</span>        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">agents</span><span class="p">:</span>
<span class="linenos"> 61</span>            <span class="n">a</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="linenos"> 62</span>        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">):</span>
<span class="linenos"> 63</span>            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">PAIRINGS</span><span class="p">[</span><span class="n">network</span><span class="p">]):</span>
<span class="linenos"> 64</span>                <span class="n">p</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">))</span> <span class="c1"># counterbalance</span>
<span class="linenos"> 65</span>                <span class="n">choices</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">agents</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">choose</span><span class="p">(</span><span class="s2">&quot;AB&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">)</span>
<span class="linenos"> 66</span>                <span class="n">counts</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">((</span><span class="n">choices</span><span class="p">,))</span>
<span class="linenos"> 67</span>                <span class="n">payoffs</span> <span class="o">=</span> <span class="n">GAMES</span><span class="p">[</span><span class="n">game</span><span class="p">][</span><span class="n">choices</span><span class="p">]</span>
<span class="linenos"> 68</span>                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">count</span><span class="p">()):</span>
<span class="linenos"> 69</span>                    <span class="n">agents</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">payoffs</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
<span class="linenos"> 70</span>                <span class="n">csv_writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">((</span><span class="n">network</span><span class="p">,</span> <span class="n">game</span><span class="p">,</span> <span class="n">pp</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 71</span>                                     <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">payoffs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="linenos"> 72</span>                                     <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">choices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">payoffs</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
<span class="linenos"> 73</span>            <span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
<span class="linenos"> 74</span>    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span>
<span class="linenos"> 75</span>             <span class="nb">tuple</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="n">r</span><span class="p">][(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">)]</span> <span class="o">/</span> <span class="p">(</span><span class="n">participant_sets</span> <span class="o">*</span> <span class="n">PAIRS</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">)),</span>
<span class="linenos"> 76</span>             <span class="n">label</span><span class="o">=</span><span class="s1">&#39;(&quot;A&quot;, &quot;A&quot;)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;solid&quot;</span><span class="p">)</span>
<span class="linenos"> 77</span>    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span>
<span class="linenos"> 78</span>             <span class="nb">tuple</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="n">r</span><span class="p">][(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">)]</span> <span class="o">/</span> <span class="p">(</span><span class="n">participant_sets</span> <span class="o">*</span> <span class="n">PAIRS</span><span class="p">)</span>  <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">)),</span>
<span class="linenos"> 79</span>             <span class="n">label</span><span class="o">=</span><span class="s1">&#39;(&quot;A&quot;, &quot;B&quot;)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dotted&quot;</span><span class="p">)</span>
<span class="linenos"> 80</span>    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span>
<span class="linenos"> 81</span>             <span class="nb">tuple</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="n">r</span><span class="p">][(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">)]</span> <span class="o">/</span> <span class="p">(</span><span class="n">participant_sets</span> <span class="o">*</span> <span class="n">PAIRS</span><span class="p">)</span>  <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">)),</span>
<span class="linenos"> 82</span>             <span class="n">label</span><span class="o">=</span><span class="s1">&#39;(&quot;B&quot;, &quot;A&quot;)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;violet&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dotted&quot;</span><span class="p">)</span>
<span class="linenos"> 83</span>    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span>
<span class="linenos"> 84</span>             <span class="nb">tuple</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="n">r</span><span class="p">][(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">)]</span> <span class="o">/</span> <span class="p">(</span><span class="n">participant_sets</span> <span class="o">*</span> <span class="n">PAIRS</span><span class="p">)</span>  <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">)),</span>
<span class="linenos"> 85</span>             <span class="n">label</span><span class="o">=</span><span class="s1">&#39;(&quot;B&quot;, &quot;B&quot;)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">)</span>
<span class="linenos"> 86</span>    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="linenos"> 87</span>    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">game</span><span class="si">}</span><span class="s2"> game, </span><span class="si">{</span><span class="n">network</span><span class="si">}</span><span class="s2"> topology</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="linenos"> 88</span>              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">participant_sets</span><span class="si">}</span><span class="s2"> participant sets, noise=</span><span class="si">{</span><span class="n">agents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">noise</span><span class="si">}</span><span class="s2">, decay=</span><span class="si">{</span><span class="n">agents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">decay</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos"> 89</span>    <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>
<span class="linenos"> 90</span>    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">rounds</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">rounds</span><span class="p">))</span>
<span class="linenos"> 91</span>    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
<span class="linenos"> 92</span>    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">((</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">))</span>
<span class="linenos"> 93</span>    <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="linenos"> 94</span>    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;fraction of pairs choosing&quot;</span><span class="p">)</span>
<span class="linenos"> 95</span>    <span class="k">if</span> <span class="n">plot_file</span><span class="p">:</span>
<span class="linenos"> 96</span>        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">plot_file</span><span class="p">)</span>
<span class="linenos"> 97</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos"> 98</span>        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="linenos"> 99</span>    <span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
<span class="linenos">100</span>
<span class="linenos">101</span>
<span class="linenos">102</span><span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="linenos">103</span><span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;--rounds&quot;</span><span class="p">,</span> <span class="s2">&quot;-r&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_ROUNDS</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos">104</span>              <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The number of rounds to play&quot;</span><span class="p">)</span>
<span class="linenos">105</span><span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;--participant-sets&quot;</span><span class="p">,</span> <span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_PARTICIPANT_SETS</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
<span class="linenos">106</span>              <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The number of participant sets to simulate&quot;</span><span class="p">)</span>
<span class="linenos">107</span><span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;-noise&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_NOISE</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
<span class="linenos">108</span>              <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The IBL activation noise to use&quot;</span><span class="p">)</span>
<span class="linenos">109</span><span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;--decay&quot;</span><span class="p">,</span> <span class="s2">&quot;-d&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_DECAY</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
<span class="linenos">110</span>              <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The IBL decay parameter to use&quot;</span><span class="p">)</span>
<span class="linenos">111</span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">rounds</span><span class="p">,</span> <span class="n">participant_sets</span><span class="p">,</span> <span class="n">noise</span><span class="p">,</span> <span class="n">decay</span><span class="p">):</span>
<span class="linenos">112</span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;results.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos">113</span>        <span class="n">w</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="linenos">114</span>        <span class="n">w</span><span class="o">.</span><span class="n">writerow</span><span class="p">((</span><span class="s2">&quot;network,game,participant set,round,&quot;</span>
<span class="linenos">115</span>                    <span class="s2">&quot;player one,player one move,player one payoff,&quot;</span>
<span class="linenos">116</span>                    <span class="s2">&quot;player two,player two move,player two payoff&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>
<span class="linenos">117</span>        <span class="n">agents</span> <span class="o">=</span> <span class="p">[</span><span class="n">Agent</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">default_utility</span><span class="o">=</span><span class="n">PREPOPULATED_VALUE</span><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="n">noise</span><span class="p">,</span> <span class="n">decay</span><span class="o">=</span><span class="n">decay</span><span class="p">)</span>
<span class="linenos">118</span>                  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">NODES</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
<span class="linenos">119</span>        <span class="k">with</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">GAMES</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">PAIRINGS</span><span class="p">)</span> <span class="o">*</span> <span class="n">participant_sets</span> <span class="o">*</span> <span class="n">rounds</span><span class="p">))</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
<span class="linenos">120</span>            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">PAIRINGS</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<span class="linenos">121</span>                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">GAMES</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<span class="linenos">122</span>                    <span class="n">run_one</span><span class="p">(</span><span class="n">agents</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">participant_sets</span><span class="p">,</span> <span class="n">rounds</span><span class="p">,</span>
<span class="linenos">123</span>                            <span class="n">t</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">g</span><span class="si">}</span><span class="s2">.png&quot;</span><span class="p">)</span>
<span class="linenos">124</span>
<span class="linenos">125</span>
<span class="linenos">126</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">127</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="results">
<h2>Results<a class="headerlink" href="#results" title="Link to this heading">¶</a></h2>
<p>Running the interdependence game in the disconnected network we see that each, fixed pair fairly quickly settles on mutual coöperation (both players selecting A)</p>
<img alt="_images/disconnected-interdependence.png" src="_images/disconnected-interdependence.png" />
<p>But as the number of connections is increased, with various pairs intermixed, it becomes harder for the players to settle on the optimal play</p>
<img alt="_images/ring-interdependence.png" src="_images/ring-interdependence.png" />
<img alt="_images/fully-connected-interdependence.png" src="_images/fully-connected-interdependence.png" />
<p>Running the independence game again players quickly settle on optimal play. But, since they don’t depend upon their partners’ moves in any way, as the number
of interconnections in the network increases this behavior does not degrade</p>
<img alt="_images/disconnected-independence.png" src="_images/disconnected-independence.png" />
<img alt="_images/ring-independence.png" src="_images/ring-independence.png" />
<img alt="_images/fully-connected-independence.png" src="_images/fully-connected-independence.png" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Gonzalez, Cleotilde, Palvi Aggarwal, and Donald Morrison.
“Emergent Group Learning from individual experiential choice: Interdependence, Aggregation and Strategy”
In preparation.</p>
</aside>
<aside class="footnote brackets" id="f2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Balliet, Daniel, Joshua M. Tybur, and Paul A. M. Van Lange.
Function Interdependecne Theory: An Evolutionary Account of Social
Situations. <em>Personality and Social Psychology Review</em> Vol. 21 No. 4;
DOI: 10.1177/1088868316657965 (2016)</p>
</aside>
<aside class="footnote brackets" id="f3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>Mason, Winter A., Andy Jones, and Robert L Goldstone.
Propagation of Innovations in Networked Groups.
<em>Journal of Experimental Psychology: General</em> Vol. 137 No. 3, 442–433;
DOI: 10.1037/a0012798 (2008).</p>
</aside>
<aside class="footnote brackets" id="f4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">4</a><span class="fn-bracket">]</span></span>
<p>Sloiman, Sabina J., Robert L Goldstone, and Cleotilde Gonzalez.
A Social Interpolation Model of Group Problem-Solving.
<em>Cognitive Science</em> Vol. 45 No. 12; DOI: 10.1111/cogs.13066 (2021).</p>
</aside>
</aside>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2014-2025 Carnegie Mellon University.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/multi-agent-network.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>